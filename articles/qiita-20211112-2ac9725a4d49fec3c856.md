---
title: "AMSAMOTIONã®8000å†† ä¸­è¯PLCã§MODBUS/TCPé€šä¿¡ã‚’ã™ã‚‹"
emoji: "ğŸ˜€"
type: "tech"
topics: [PLC,MELSEC,ã‚·ãƒ¼ã‚±ãƒ³ã‚µ,ä¸­è¯PLC,Factory_IO]
published: false
---

AliExpressã§è²·ã£ãŸ8000å††ã®PLCã§MODBUS/TCPé€šä¿¡ã‚’ã—ã¦ã¿ã‚ˆã†ã®è¨˜äº‹ã§ã™ã€‚
è¨­å®šå†…å®¹ã¯AMX-FX3U-26MT-Eç”¨ãªã®ã§ç´”æ­£ã®FX3Uã§ã¯å½¹ã«ç«‹ãŸãªã„å†…å®¹ã§ã™ã€‚
LANå†…è”µã®MELSECã ã¨é€šä¿¡ãƒ—ãƒ­ãƒˆã‚³ãƒ«æ”¯æ´æ©Ÿèƒ½ã§åŒã˜äº‹ãŒå‡ºæ¥ã‚‹ã¯ãšã§ã™ã€‚

https://qiita.com/fa_yoshinobu/items/27babd3cdb0bb303b01a

http://www.amsamotion.com/product_view_1011_515.html

# MODBUSã¨ã¯

https://ja.wikipedia.org/wiki/Modbus

è¦ã™ã‚‹ã«Modiconç¤¾PLC(Schneider Electric)ã®ç”£æ¥­ç”¨ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã§ä»•æ§˜ãŒé–‹ç¤ºã•ã‚Œã¦ã‚‹ã‹ã‚‰è‰²ã€…ãªæ©Ÿå™¨ã«å®Ÿè£…ã•ã‚Œã¦ã‚‹ãƒ—ãƒ­ãƒˆã‚³ãƒ«ã§ã™ã€‚
Githubã‚’æ¼ã‚‹ã¨ãƒã‚¤ã‚³ãƒ³ç”¨ã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚‚ãŸãã•ã‚“ã‚ã‚Šã¾ã™ã€‚
MODBUS RTUã¯ã‚·ãƒªã‚¢ãƒ«é€šä¿¡ã§ã™ãŒMODBUS TCPã¯LANã§é€šä¿¡ã™ã‚‹ã‚„ã¤ã§ã™ã­ã€‚

è³‡æ–™ç•ªå·:NM-5650 è³‡æ–™åç§°:Modbusãƒ—ãƒ­ãƒˆã‚³ãƒ«æ¦‚èª¬æ›¸ ãŒæ—¥æœ¬èªã§ã‚ã‹ã‚Šã‚„ã™ã„ã§ã™

https://www.m-system.co.jp/kaisetu/dl_manualJ.html

AMSAMOTIONã®HPã«ãƒãƒ‹ãƒ¥ã‚¢ãƒ«ãŒã‚ã‚‹ã®ã§èª­ã‚“ã§ã¿ã‚‹â€¦
ğŸ˜‡ğŸ˜•ğŸ¤®

![image.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/2146151/fb5da557-99a2-f6ac-a681-9da25ea9de57.png)

è©¦ã—ãŸçµæœã“ã‚“ãªå‰²ã‚Šä»˜ã‘ä»•æ§˜ã£ã½ã„ã§ã™



# ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ãƒ‡ãƒã‚¤ã‚¹å‰²ã‚Šä»˜ã‘
D8476-D8479ãŒè¨­å®šç¯„å›²å¤– or 0è¨­å®šæ™‚ã¯ä¸‹è¨˜ã®ã‚ˆã†ã«ãªã‚Šã¾ã™ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ

|-|Type |Data Address|PLC Address|
|:-|:-|:-|:-|
|DO|ã‚³ã‚¤ãƒ«(Coil)|1-32|Y000-Y037|
|DI|å…¥åŠ›ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹(Input Status)|10001-10032|X000-X037|
|AI|å…¥åŠ›ãƒ¬ã‚¸ã‚¹ã‚¿(Input Register)|30001-30032|D8030-D8061|
|AO|ä¿æŒãƒ¬ã‚¸ã‚¹ã‚¿(Holding Register)|40001-40064|D7100-D7163|


# ä»»æ„ã®ã‚¢ãƒ‰ãƒ¬ã‚¹è¨­å®šä¾‹
åˆ¶ç´„ã¯ã‚Šã¾ã™ãŒã‚ã‚‹ç¨‹åº¦ã¯ä»»æ„ã®ã‚¢ãƒ‰ãƒ¬ã‚¹ã«å‰²ã‚Šå½“ã¦ã‚‰ã‚Œã¾ã™ã€‚
ãƒãƒ‹ãƒ¥ã‚¢ãƒ«èª­ã‚“ã ãŒã‚ã‹ã‚Šã¥ã‚‰ã„
PLC Addressã®ç¯„å›²ã«è¨­å®šã™ã‚‹ã«ã¯Settingã®Dãƒ‡ãƒã‚¤ã‚¹ã«Parameterã®16é€²æ•°ã‚’è¨­å®šã—ã¾ã™

|-|Type |Data Address|PLC Address|Setting|Parameter|Max Length|
|:-|:-|:-|:-|:-|:-|:-|
|DO|ã‚³ã‚¤ãƒ«(Coil)|1-32|M0000-M0031|D8476|0x8080|32bit|
|DI|å…¥åŠ›ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹(Input Status)|10001-10032|M0032-M0063|D8477|0x8082|32bit|
|AI|å…¥åŠ›ãƒ¬ã‚¸ã‚¹ã‚¿(Input Register)|30001-30032|D1000-D1031|D8478|0x43E8|32Word|
|AO|ä¿æŒãƒ¬ã‚¸ã‚¹ã‚¿(Holding Register)|40001-40064|D1032-D1095|D8479|0x8408|64Word|


## ä¸Šä½3bitã®è¨­å®š
ãƒ“ãƒƒãƒˆãƒ‡ãƒã‚¤ã‚¹
001= 8bit
010=16bit
100=32bit

ãƒ¯ãƒ¼ãƒ‰ãƒ‡ãƒã‚¤ã‚¹
001=16Word
010=32Word
100=64Word(AOã®ã¿å¯)

## ä¸‹ä½ã®è¨­å®š(Mã‹Dã®ã‚¢ãƒ‰ãƒ¬ã‚¹ã‚’ã‚ˆãã‚ã‹ã‚‰ãªã„Hexã§è¨­å®š)
Mé–‹å§‹ 0x0080=M0000-M0015
Mçµ‚äº† 0x00BF=M1008-M1023
Dé–‹å§‹ 0x0014=D0500
Dçµ‚äº† 0x1F3F=D7999
ã†ã¾ãèª¬æ˜ã§ããªã„ğŸ¤®

ä¸‹è¨˜ã®ã‚ˆã†ã«å‰²ã‚Šä»˜ã‘ã¦MAXã®ç‚¹æ•°ã‚’å‰²ã‚Šå½“ã¦ãŸå ´åˆ
DO:M0000-M0031:0x080->0x8080
DI:M0032-M0063:0x082->0x8082
AI:D1000-D1031:0x3E8->0x43E8
AO:D1032-D1095:0x408->0x8408

*M8411ã‚’ä½¿ã‚ãªã„ã¨ã„ã‘ãªã„ã‚‰ã—ã„ã€‚è¨­å®šçµ‚äº†å¾Œã¯FLASHã«æ›¸ãè¾¼ã¾ã‚Œã‚‹ã®ã§å›è·¯ã‚’å‰Šé™¤ã™ã‚‹ã€‚
![image.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/2146151/4dcf062c-038e-3eeb-687f-166afb7447c3.png)

IPã‚‚åŒæ§˜
![image.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/2146151/38811e3b-e578-d677-8d66-1b3c7bef77c6.png)

# ãƒ†ã‚¹ãƒˆ

https://github.com/ClassicDIY/ModbusTool

![image.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/2146151/5b937058-4db5-b09a-3c64-0762d46bddde.png)
![image.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/2146151/2af78b77-ad56-b6ad-88b7-5b7790c9b66d.png)
![image.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/2146151/2897723f-8f9f-9aff-7a8e-efb543611412.png)
![image.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/2146151/66d703af-d3ea-7ee6-8a01-0a1182a97a17.png)
![image.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/2146151/68087c88-93ec-24bd-d73c-ba5f183699eb.png)

# Factory IO

ã“ã‚“ãªä¸­è¯ã®PLCé€šä¿¡ãƒ†ã‚¹ãƒˆã—ã¦ã©ã†ã™ã‚‹ã­ã‚“ã¨ã„ã†äº‹ãªã®ã§ã™ãŒã¾ã‚ãã‚Œã«ã¯ç›®çš„ãŒã‚ã‚Šã¾ã™ã€‚

https://factoryio.com/

<iframe width="560" height="315" src="https://www.youtube.com/embed/LArdLLPjLpI" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>


ã“ã‚Œã‚’8000å††ã®ä¸­è¯PLCã§å‹•ã‹ã™ã®ã¯ãŠã‚‚ã—ã‚ãã†ãªã®ã§ã€‚
![image.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/2146151/39619ba5-a423-f952-f685-6fe1276a8e57.png)
![image.png](https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/2146151/93a1de8d-2a13-c966-73d2-0015d80309d1.png)



